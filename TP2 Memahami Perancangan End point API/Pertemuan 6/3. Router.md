# Laravel Router - Panduan Lengkap

## Apa itu Router?

Router adalah komponen dalam Laravel yang menangani permintaan HTTP (request) dari client dan mengarahkannya ke controller atau action yang sesuai. Router adalah "pintu masuk" aplikasi yang menentukan rute URL mana yang akan dieksekusi.

---

## 1. Lokasi File Router

File router Laravel terletak di:
```
routes/web.php       → Untuk web routes (form, session, CSRF)

routes/api.php       → Untuk API routes (JSON responses)
```

---

## 2. Dasar-Dasar Router

### Route HTTP Methods

Laravel mendukung 7 HTTP methods utama:

```php
// GET - Mengambil data
Route::get('/users', 'UserController@index');

// POST - Mengirim data baru
Route::post('/users', 'UserController@store');

// PUT - Mengupdate seluruh data
Route::put('/users/{id}', 'UserController@update');

// PATCH - Mengupdate sebagian data
Route::patch('/users/{id}', 'UserController@update');

// DELETE - Menghapus data
Route::delete('/users/{id}', 'UserController@destroy');
```
---

## 3. Jenis-Jenis Route

### A. Route Sederhana (Closure)

```php
Route::get('/hello', function () {
    return 'Hello World';
});

Route::get('/users/{id}', function ($id) {
    return 'User ID: ' . $id;
});
```

### B. Route ke Controller

```php
// Menggunakan string namespace
Route::get('/users', 'UserController@index');

// Menggunakan class namespace (Laravel 8+)
Route::get('/users', [UserController::class, 'index']);
```

### C. Route Resource (RESTful)

```php
// Otomatis membuat 7 routes CRUD
Route::resource('users', 'UserController');

// Menghasilkan:
// GET    /users                 → index
// POST   /users                 → store
// GET    /users/create          → create
// GET    /users/{id}            → show
// GET    /users/{id}/edit       → edit
// PUT    /users/{id}            → update
// DELETE /users/{id}            → destroy
```

---

## 4. Route Parameters

### A. Required Parameter

```php
Route::get('/users/{id}', function ($id) {
    return 'User: ' . $id;
});

// /users/123 → User: 123
// /users     → 404 Not Found
```

### B. Optional Parameter

```php
Route::get('/posts/{post}/comments/{comment}', function ($post, $comment) {
    return "Post $post, Comment $comment";
});
```

## 5. Named Routes

Named routes memudahkan proses generating URL:

```php
// Mendefinisikan named route
Route::get('/users/{id}', 'UserController@show')->name('users.show');

// Menggunakan helper route()
<a href="{{ route('users.show', $user->id) }}">View User</a>

// Atau
$url = route('users.show', ['id' => 123]);
// Hasil: /users/123
```

---

## 6. Route Groups

### A. Prefix
untuk grouping router

```php
Route::prefix('api')->group(function () {
    Route::get('/users', 'UserController@index');     // /api/users
    Route::post('/users', 'UserController@store');    // /api/users
});
```

### B. Middleware

```php
Route::middleware('auth')->group(function () {
    Route::get('/dashboard', 'DashboardController@index');
    Route::get('/profile', 'ProfileController@show');
});
```
---

## 11. Praktik Terbaik

### ✅ DO's
- Gunakan named routes untuk generate URL
- Gunakan route groups untuk organizational clarity
- Implement proper constraints pada parameters
- Gunakan meaningful route names (resource.action)
- Separate API dan Web routes

### ❌ DON'Ts
- Jangan hardcode URL di template
- Jangan gunakan terlalu banyak nesting groups
- Jangan skip CSRF protection
- Jangan expose sensitive logic di route closures
- Jangan gunakan route parameter tanpa validation

---

## Contoh Controller

```php
// routes/web.php

Route::get('/', 'HomeController@index')->name('home');

// Authenticated routes
Route::middleware('auth')->group(function () {
    Route::get('/dashboard', 'DashboardController@index')->name('dashboard');
    Route::resource('users', 'UserController');
    Route::resource('posts', 'PostController');
});

// API routes
Route::apiResource('api/users', 'Api\UserController');
Route::apiResource('api/posts', 'Api\PostController');

// Public routes
Route::get('/about', 'AboutController@index')->name('about');
Route::get('/contact', 'ContactController@show')->name('contact.show');
Route::post('/contact', 'ContactController@store')->name('contact.store');
```

---

## Debugging Routes

```bash
# List semua routes
php artisan route:list

# List dengan extra detail
php artisan route:list --verbose

# Filter by method
php artisan route:list --method=GET

# Filter by name
php artisan route:list --name=users
```

---

**Kesimpulan**: Router adalah fondasi aplikasi Laravel. Memahami routing dengan baik akan memudahkan development dan membuat kode lebih maintainable.
